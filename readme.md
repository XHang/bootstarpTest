# 项目简介：前端的一个测试框架  
## Include
1. bootstrap 的一些样式
2. select2的示例程序
3. 前端的跨域问题

## 跨域问题
### 问题演示

1. 第一步：
  启动本项目，其端口要求是8080，启动完毕后，访问这个地址`http://localhost:8080/frontEndRoad/DataServlct`至少能得到响应  

2. 第二步：
  然后在本项目里面的question文件夹里面，将cross-domain.html直接通过浏览器打开
  此时，若这个世界是正常的，你应该可以看到一个弹出框`error`

  打开你的浏览器控制台，可以清楚  看到一行红字，我念给你听啊

  ` No 'Access-Control-Allow-Origin' header is present on the requested resource. Origin 'null' is therefore not allowed access.`

  没错，这就是跨域问题，而且，很神奇的是，虽然发生了跨域问题，但是呢，你在浏览器的网络响应中，还是可以看到服务器返回的响应。

  > 是不是不太安全呢?

  只是浏览器say no而已。
  
  ### 为什么浏览器要限制跨域请求呢？
  想想吧，如果跨域请求不禁止的话。骗子网站写了一个ajax请求发给淘宝服务器。
  诱导无知的吃瓜群众先去登录淘宝，然后转到骗子网站，骗子网站随后就发ajax请求给淘宝服务器，获取吃瓜群众的隐私信息。
  没有阻止这种跨域请求，那么骗子就轻而易举就拿到了吃瓜群主的隐私信息。
  这不就很麻烦了吗？
  当然，有一个猜想要验证，就是骗子网站发给淘宝服务器时，淘宝会不会还是使用之前吃瓜群众的会话信息。
  也就是ｓｅｓｓｉｏｎ啦，如果答案是会的话，猜想正确，而这就是浏览器要阻止跨域的一个根本原因。。安全性问题
  > 顺便探讨一些在ａｊａｘ中，ｃｏｏｋｉｅ的流转是怎样的。

  ### 问题解决  

  **第一种解决方案 **

  在服务器ajax接口的响应体里，加一个响应头键值对。

  例如`response.addHeader("Access-Control-Allow-Origin", "*");`

  表示浏览器可以接受这个跨域请求。

  当然`*`不太好，这样这个接口可以被任何浏览器跨域访问，存在很大的安全隐患。

  如果你是从`http://foo.example`这个域名下发起跨域请求的，可以将这个url加在

  那个`Access-Control-Allow-Origin`里面，这样的话，只有这个网站的跨域请求才不会被拦截

  **第二种解决方案**：

  自然就是jsonp解决方案了

  jsonp的请求方式，类似于请求服务器上面的js，css资源，像这些资源的请求是不会被跨越的。

  只需要客户端请求服务器资源时传多一个callback参数。

  后端检测到这个参数的话，把原本的json数据再往后面包上一层，返回给前端。

  前端调用就行了。

  ** 内部实现机理是怎么的？**

  嗯，其实把，首先前端先定义一个方法，比如说定义一个方法名，叫method

  后端返回的数据就是一段js代码，这个js代码就是调用method的方法，调用时传的参数就是实际上服务器要返回到前端的参数。

  这样把后端的返回的数据当做一串js脚本，通过script脚本来请求。这样一旦js脚本执行了，自然就调用到了我们事先写好的method方法，也就自然能拿到后端返回的数据了。

  简直机制。

  ## iframe 跨域问题

  什么是ifame的跨域问题

  简而言之，就是A页面用iframe 标签引用了B页面的。

  如果A页面和B页面处在不同域的话，那么访问A页面是看不到ifram标签的B页面的

  浏览器会报`in a frame because it set 'X-Frame-Options' to 'deny'`

  这就是跨域问题

  怎么解决跨域问题，一个最简单的方法当然就是在服务器返回html的时候顺便补上`X-Frame-Options`响应头

  > `X-Frame-Options` 有三种值
  >
  > 1. `DENY` 表示该页面不允许在 frame 中展示，即便是在相同域名的页面中嵌套也不允许。
  > 2. `SAMEORIGIN` 表示该页面可以在相同域名页面的 frame 中展示。
  > 3. `ALLOW-FROM url `表示该页面可以在指定来源的 frame 中展示

  这在JAVA web上可以通过过滤器实现

  > 本项目的代码就有一个过滤器，详情请查看过滤器代码

  简而言之，就是过滤器匹配一个URL链接，然后在过滤处理中，设置HTTP响应头信息。

  so 就这么简单

  使用Spring的话应该也有提供一个页面的过滤器，同理加上即可。这里就不再赘述了

  > 顺便一提，如果你想把某个外网页面作为一个ifame植入到你的页面中
  >
  > 比如说，把谷歌首页植入到你网站的的某个页面的iframe中，很抱歉，这是不可能的
  >
  > 这个需求交给上帝去实现吧。我们程序员不是上帝，所以，不可能实现这种功能

  ​

  ​

  ​

  ​

  ​

  ​

